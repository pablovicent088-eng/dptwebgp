<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DPT</title>
    <script>
// Sistema de protecci√≥n simple - Redirecci√≥n a Google
// Detecta herramientas de desarrollador y redirige

class SimpleProtection {
    constructor() {
        this.init();
    }

    init() {
        // Detectar herramientas de desarrollador
        this.detectDevTools();
        
        // Bloquear teclas de acceso r√°pido
        this.blockKeyboardShortcuts();
        
        // Bloquear men√∫ contextual
        this.blockContextMenu();
    }

    detectDevTools() {
        setInterval(() => {
            const widthThreshold = window.outerWidth - window.innerWidth > 160;
            const heightThreshold = window.outerHeight - window.innerHeight > 160;
            
            if (widthThreshold || heightThreshold) {
                this.redirectToGoogle();
            }
        }, 1000);
    }

    blockKeyboardShortcuts() {
        document.addEventListener('keydown', (e) => {
            // F12
            if (e.keyCode === 123) {
                e.preventDefault();
                this.redirectToGoogle();
                return false;
            }
            
            // Ctrl+Shift+I (Inspector)
            if (e.ctrlKey && e.shiftKey && e.keyCode === 73) {
                e.preventDefault();
                this.redirectToGoogle();
                return false;
            }
            
            // Ctrl+Shift+J (Console)
            if (e.ctrlKey && e.shiftKey && e.keyCode === 74) {
                e.preventDefault();
                this.redirectToGoogle();
                return false;
            }
            
            // Ctrl+U (Ver c√≥digo fuente)
            if (e.ctrlKey && e.keyCode === 85) {
                e.preventDefault();
                this.redirectToGoogle();
                return false;
            }
            
            // Ctrl+Shift+C (Selector de elementos)
            if (e.ctrlKey && e.shiftKey && e.keyCode === 67) {
                e.preventDefault();
                this.redirectToGoogle();
                return false;
            }
        });
    }

    blockContextMenu() {
        document.addEventListener('contextmenu', (e) => {
            e.preventDefault();
            this.redirectToGoogle();
            return false;
        });
    }

    redirectToGoogle() {
        // Redirigir inmediatamente a Google
        window.location.href = 'https://www.google.com';
    }
}

// Inicializar protecci√≥n simple
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
        new SimpleProtection();
    });
} else {
    new SimpleProtection();
}
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: new.allover.top fonts.googleapis.com fonts.gstatic.com cdnjs.cloudflare.com; frame-src 'self' new.allover.top; object-src 'none'; base-uri 'self'; form-action 'none';">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <title>DPT</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <img src="LOGOD.png" alt="DPT" class="logo-image">
                </div>
                <nav class="nav">
                    <a href="https://t.me/+_0gR995LrwNhOTdk" target="_blank" class="nav-link active">üì± √önete al Grupo</a>
                </nav>
            </div>
        </header>

        <main class="main">
            <div class="player-section">
                <div class="player-header">
                    <div class="channel-info">
                        <div class="channel-badge">
                            <i class="fab fa-telegram-plane"></i>
                            <a href="https://t.me/+_0gR995LrwNhOTdk" target="_blank" class="telegram-link">
                                <span>üì± Grupo Telegram</span>
                            </a>
                        </div>
                        <h2 class="channel-title">Stream #1 - DPT</h2>
                    </div>

                </div>
                
                <div class="player-container" id="playerContainer">
                    <div class="player-wrapper">
                        <div id="videoPlayer">
                            <iframe src="http://new.allover.top/hucaster.php?width=900&height=506&channel=motogphn1&g=1" 
                                    width="900" 
                                    height="506" 
                                    frameborder="0" 
                                    allowfullscreen
                                    sandbox="allow-scripts allow-presentation"
                                    referrerpolicy="no-referrer"
                                    allow="fullscreen"
                                    loading="lazy"
                                    style="background: linear-gradient(135deg, #1a1a2e, #16213e); display: flex; align-items: center; justify-content: center; pointer-events: auto;"
                                    onerror="this.style.display='none'; document.getElementById('fallbackMessage').style.display='block';">
                            </iframe>
                            <div id="fallbackMessage" style="display: none; background: linear-gradient(135deg, #1a1a2e, #16213e); color: white; padding: 60px; text-align: center; border-radius: 8px; min-height: 506px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                                <div style="font-size: 24px; margin-bottom: 20px;">üèÜ Reproductor de La Liga</div>
                                <div style="font-size: 16px; margin-bottom: 15px;">Conectando al stream...</div>
                                <div style="font-size: 14px; opacity: 0.8;">El reproductor se est√° cargando. Si no aparece, puede deberse a restricciones de red o disponibilidad del stream.</div>
                                <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 8px; font-size: 14px;">
                                    <strong>Par√°metros del stream:</strong><br>
                                    Canal: motogphn1 | Resoluci√≥n: 900x506 | Modo: g=1
                                </div>
                            </div>
                        </div>
                        <div class="loading-overlay" id="loadingOverlay">
                            <div class="loading-spinner"></div>
                            <p>Cargando transmisi√≥n...</p>
                        </div>
                    </div>
                    <div class="player-controls-bottom">
                        <div class="volume-instruction">
                            <span> Click aqu√≠ arriba para activar el volumen üîá ‚Üë</span>
                        </div>
                    </div>
                    <div class="loading-message" id="loadingMessage">
                        <div class="loading-text">
                            <i class="fas fa-clock"></i>
                            <span id="loadingCountdown">Espera 30 segundos a que cargue el contenido</span>
                        </div>
                    </div>
                </div>


            </div>


        </main>
    </div>

    <!-- Scripts del reproductor -->
    <script type='text/javascript'>
        // Configuraci√≥n del reproductor - Probando ambas opciones
        var width = 900;
         var height = 506;
         var channel = 'motogphn1';
         var g = '1'; // Cambiado a g='1' como primera opci√≥n
        
        // Funci√≥n para insertar el reproductor directamente
        function insertPlayer() {
            const playerContainer = document.getElementById('videoPlayer');
            if (playerContainer) {
                // Limpiar contenedor
                playerContainer.innerHTML = '';
                
                // Crear iframe directamente basado en el script hucaster.js
                const iframe = document.createElement('iframe');
                iframe.width = '100%';
                iframe.height = '100%';
                iframe.style.border = 'none';
                iframe.scrolling = 'no';
                iframe.frameBorder = '0';
                iframe.allowTransparency = true;
                iframe.marginWidth = '0';
                iframe.marginHeight = '0';
                iframe.allowFullscreen = true;
                
                // URL del reproductor basada en el script original
                iframe.src = `https://new.allover.top/hembedplayer/${channel}/${g}/${width}/${height}`;
                
                playerContainer.appendChild(iframe);
                
                // Si no funciona con g='1', probar con g='4'
                iframe.onerror = function() {
                    console.log('Probando con g=4...');
                    iframe.src = `https://new.allover.top/hembedplayer/${channel}/4/${width}/${height}`;
                };
            }
        }
        
        // Ejecutar cuando el DOM est√© listo
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', insertPlayer);
        } else {
            insertPlayer();
        }
    </script>
    <script>
// Script para actualizar los pr√≥ximos partidos de La Liga
// Obtiene datos actualizados y filtra solo partidos actuales y futuros

class MatchesUpdater {
    constructor() {
        this.apiUrl = 'https://www.marca.com/futbol/primera-division/calendario.html';
        this.proxyUrl = 'https://cors.isomorphic-git.org/'; // Proxy CORS p√∫blico de solo lectura
        this.matchesContainer = document.querySelector('.schedule-list');
        this.today = new Date();
        this.today.setHours(0, 0, 0, 0); // Resetear horas para comparaci√≥n de fechas
        this.teamNames = [
        ];
        this.teamSynonyms = [
            { pattern: /^(?:deportivo\s+)?alav[e√©]s$/i, name: 'Alav√©s' },
            { pattern: /^athletic(?:\s+club)?$/i, name: 'Athletic' },
            { pattern: /^atl[e√©]tico(?:\s+de\s+madrid)?$/i, name: 'Atl√©tico' },
            { pattern: /^(?:fc\s+)?barcelona$/i, name: 'Barcelona' },
            { pattern: /^(?:real\s+)?betis$/i, name: 'Betis' },
            { pattern: /^(?:rc\s+)?celta(?:\s+de\s+vigo)?$/i, name: 'Celta' },
            { pattern: /^espanyol|rcd\s+espanyol$/i, name: 'Espanyol' },
            { pattern: /^(?:getafe)(?:\s+cf)?$/i, name: 'Getafe' },
            { pattern: /^girona(?:\s+fc)?$/i, name: 'Girona' },
            { pattern: /^(?:ud\s+)?las\s+palmas$/i, name: 'Las Palmas' },
            { pattern: /^(?:cd\s+)?legan[e√©]s$/i, name: 'Legan√©s' },
            { pattern: /^mallorca|rcd\s+mallorca$/i, name: 'Mallorca' },
            { pattern: /^(?:ca\s+)?osasuna$/i, name: 'Osasuna' },
            { pattern: /^rayo(?:\s+vallecano)?$/i, name: 'Rayo' },
            { pattern: /^(?:real\s+)?madrid$/i, name: 'Real Madrid' },
            { pattern: /^(?:real\s+)?sociedad$/i, name: 'R. Sociedad' },
            { pattern: /^sevilla(?:\s+fc)?$/i, name: 'Sevilla' },
            { pattern: /^valencia(?:\s+cf)?$/i, name: 'Valencia' },
            { pattern: /^(?:real\s+)?valladolid(?:\s+cf)?$/i, name: 'Valladolid' },
            { pattern: /^villarreal(?:\s+cf)?$/i, name: 'Villarreal' }
        ];
    }

    // Helper: inferir a√±o de la temporada para un mes (1-12)
    inferYearForMonth(month) {
        const now = new Date();
        const currentYear = now.getFullYear();
        const currentMonth = now.getMonth() + 1; // 1-12
        // Temporada: comienza en agosto (8) y termina en mayo (5) del siguiente a√±o
        const seasonStartYear = currentMonth >= 8 ? currentYear : currentYear - 1;
        // Si el mes es ago(8) o mayor => a√±o de inicio; si es menor a 8 => a√±o siguiente
        return month >= 8 ? seasonStartYear : seasonStartYear + 1;
    }

    // Helper: parsear "DD/MM HH:MM" a ISO YYYY-MM-DD y HH:MM
    parseMarcaDateTime(text) {
        const m = text.match(/(\d{2})\/(\d{2})\s+(\d{2}:(\d{2}))/);
        if (!m) return null;
        const day = parseInt(m[1], 10);
        const month = parseInt(m[2], 10);
        const time = m[3];
        const year = this.inferYearForMonth(month);
        const isoDate = `${year}-${String(month).padStart(2,'0')}-${String(day).padStart(2,'0')}`;
        return { date: isoDate, time };
    }

    // Normalizar nombre de equipo seg√∫n sin√≥nimos/patrones
    normalizeTeam(rawText) {
        const txt = (rawText || '').trim().replace(/\s+/g, ' ');
        if (!txt) return null;
        for (const s of this.teamSynonyms) {
            if (s.pattern.test(txt)) return s.name;
        }
        return null;
    }

    // Intentar extraer "Jornada N" desde el contenedor cercano
    extractMatchday(startEl) {
        let el = startEl;
        for (let depth = 0; depth < 5 && el; depth++) {
            const text = (el.textContent || '').trim();
            const m = text.match(/Jornada\s*(\d{1,2})/i);
            if (m) return `Jornada ${m[1]}`;
            el = el.parentElement;
        }
        return 'LaLiga';
    }

    // Intentar obtener y parsear el calendario desde Marca via proxy CORS
    async fetchMatchesFromMarca() {
        try {
            const url = this.proxyUrl + this.apiUrl;
            const res = await fetch(url, { headers: { 'x-requested-with': 'fetch' } });
            if (!res.ok) throw new Error(`HTTP ${res.status}`);
            const html = await res.text();

            // Parsear HTML con DOMParser
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');

            // Buscar todos los nodos que contengan patrones "DD/MM HH:MM"
            const allNodes = Array.from(doc.querySelectorAll('body *'));
            const timeNodes = allNodes.filter(el => /\b\d{2}\/\d{2}\s+\d{2}:\d{2}\b/.test(el.textContent || ''));

            const matches = [];
            const seen = new Set();

            const findNeighborTeam = (startEl, dir = 'prev') => {
                 let el = startEl;
                 for (let i = 0; i < 10 && el; i++) { // limitar pasos de b√∫squeda
                     el = dir === 'prev' ? el.previousElementSibling : el.nextElementSibling;
                     if (!el) break;
                    const t = el.textContent ? el.textContent.trim() : '';
                    const norm = this.normalizeTeam(t);
                    if (norm) return norm;
                     // Buscar hijos
                    const candidate = Array.from(el.querySelectorAll('*'))
                        .map(x => (x.textContent||'').trim())
                        .map(tx => this.normalizeTeam(tx))
                        .find(Boolean);
                    if (candidate) return candidate;
                 }
                 return null;
             };
 
             for (const node of timeNodes) {
                 const when = this.parseMarcaDateTime(node.textContent.trim());
                 if (!when) continue;
 
                 // Detectar equipos alrededor del nodo de tiempo
                 let homeTeam = findNeighborTeam(node, 'prev');
                 let awayTeam = findNeighborTeam(node, 'next');
 
                 // Si no fueron encontrados por hermanos, intentar con el contenedor fila
                 if (!homeTeam || !awayTeam) {
                     const row = node.closest('tr, li, .row, .partido, .resultado, .calendario, .jornada') || node.parentElement;
                     if (row) {
                        const texts = Array.from(row.querySelectorAll('*'))
                            .map(x => (x.textContent||'').trim())
                            .filter(Boolean)
                            .map(tx => this.normalizeTeam(tx))
                            .filter(Boolean);
                        // Quitar duplicados conservando orden
                        const seenTeams = new Set();
                        const foundTeams = texts.filter(t => (seenTeams.has(t) ? false : (seenTeams.add(t), true)));
                         if (foundTeams.length >= 2) {
                             if (!homeTeam) homeTeam = foundTeams[0];
                             if (!awayTeam) awayTeam = foundTeams[1];
                         }
                     }
                 }
 
                 if (!homeTeam || !awayTeam) continue; // no confiable, saltar
 
                const key = `${when.date}|${homeTeam}|${awayTeam}|${when.time}`;
                 if (seen.has(key)) continue;
                 seen.add(key);
 
                 matches.push({
                     date: when.date,
                     time: when.time,
                     homeTeam,
                     awayTeam,
                    matchday: this.extractMatchday(node)
                 });
             }

            // Ordenar por fecha/hora y filtrar pr√≥ximos
            const upcoming = this.filterUpcomingMatches(matches);
            return upcoming;
        } catch (e) {
            console.warn('Fallo al obtener datos de Marca:', e);
            return null;
        }
    }

    // Datos de partidos fallback - todos desde hoy en adelante (placeholder)
    getMatchesData() {
        const today = new Date();
        const tomorrow = new Date(today);
        tomorrow.setDate(today.getDate() + 1);
        const dayAfter = new Date(today);
        dayAfter.setDate(today.getDate() + 2);
        const dayAfter2 = new Date(today);
        dayAfter2.setDate(today.getDate() + 3);
        const dayAfter3 = new Date(today);
        dayAfter3.setDate(today.getDate() + 4);
        
        return [
            {
                date: today.toISOString().split('T')[0],
                time: '17:00',
                homeTeam: 'Betis',
                awayTeam: 'Alav√©s',
                matchday: 'Jornada 2'
            },
            {
                date: today.toISOString().split('T')[0],
                time: '19:30',
                homeTeam: 'Mallorca',
                awayTeamTeam: 'Celta',
                awayTeam: 'Celta',
                matchday: 'Jornada 2'
            },
            {
                date: today.toISOString().split('T')[0],
                time: '21:30',
                homeTeam: 'Atl√©tico',
                awayTeam: 'Elche',
                matchday: 'Jornada 2'
            },
            {
                date: tomorrow.toISOString().split('T')[0],
                time: '17:00',
                homeTeam: 'Levante',
                awayTeam: 'Barcelona',
                matchday: 'Jornada 2'
            },
            {
                date: tomorrow.toISOString().split('T')[0],
                time: '19:30',
                homeTeam: 'Osasuna',
                awayTeam: 'Valencia',
                matchday: 'Jornada 2'
            },
            {
                date: tomorrow.toISOString().split('T')[0],
                time: '21:30',
                homeTeam: 'R. Sociedad',
                awayTeam: 'Espanyol',
                matchday: 'Jornada 2'
            },
            {
                date: dayAfter.toISOString().split('T')[0],
                time: '17:00',
                homeTeam: 'Villarreal',
                awayTeam: 'Girona',
                matchday: 'Jornada 2'
            },
            {
                date: dayAfter.toISOString().split('T')[0],
                time: '19:30',
                homeTeam: 'Oviedo',
                awayTeam: 'Real Madrid',
                matchday: 'Jornada 2'
            },
            {
                date: dayAfter2.toISOString().split('T')[0],
                time: '19:30',
                homeTeam: 'Athletic',
                awayTeam: 'Rayo',
                matchday: 'Jornada 2'
            },
            {
                date: dayAfter3.toISOString().split('T')[0],
                time: '21:30',
                homeTeam: 'Sevilla',
                awayTeam: 'Getafe',
                matchday: 'Jornada 2'
            }
        ];
    }

    // Filtrar partidos para mostrar solo los actuales y futuros
    filterUpcomingMatches(matches) {
        if (!Array.isArray(matches)) return [];
        const today = this.today ? new Date(this.today) : new Date();
        today.setHours(0, 0, 0, 0); // Resetear horas para comparaci√≥n estricta por d√≠a
        
        // Ordenar por fecha y hora primero
        const sorted = matches.slice().sort((a, b) => {
            const aDate = new Date(`${a.date}T${(a.time||'00:00')}:00`);
            const bDate = new Date(`${b.date}T${(b.time||'00:00')}:00`);
            return aDate - bDate;
        });

        return sorted.filter(match => {
            const matchDate = new Date(match.date + 'T00:00:00'); // Asegurar formato correcto
            matchDate.setHours(0, 0, 0, 0); // Resetear horas
            return matchDate >= today; // Excluir cualquier fecha anterior a hoy
        }).slice(0, 6); // Mostrar m√°ximo 6 partidos
    }

    // Formatear fecha para mostrar
    formatDate(dateString) {
        const date = new Date(dateString);
        const today = new Date();
        const tomorrow = new Date(today);
        tomorrow.setDate(today.getDate() + 1);
        
        // Comparar fechas sin horas
        const dateOnly = new Date(date.getFullYear(), date.getMonth(), date.getDate());
        const todayOnly = new Date(today.getFullYear(), today.getMonth(), today.getDate());
        const tomorrowOnly = new Date(tomorrow.getFullYear(), tomorrow.getMonth(), tomorrow.getDate());
        
        if (dateOnly.getTime() === todayOnly.getTime()) {
            return 'Hoy';
        } else if (dateOnly.getTime() === tomorrowOnly.getTime()) {
            return 'Ma√±ana';
        } else {
            const days = ['Dom', 'Lun', 'Mar', 'Mi√©', 'Jue', 'Vie', 'S√°b'];
            const months = ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'];
            const dayName = days[date.getDay()];
            const day = date.getDate();
            const month = months[date.getMonth()];
            return `${dayName} ${day} ${month}`;
        }
    }

    // Crear elemento DOM para un partido
    createMatchHTML(match) {
        const today = new Date();
        const todayString = today.toISOString().split('T')[0];
        const isToday = match.date === todayString;
        
        const matchElement = document.createElement('div');
        matchElement.className = `schedule-item${isToday ? ' today-match' : ''}`;
        
        matchElement.innerHTML = `
            ${isToday ? '<div class="today-indicator">HOY</div>' : ''}
            <div class="match-time">${this.formatDate(match.date)} ${match.time || ''}</div>
            <div class="match-teams">${match.homeTeam} vs ${match.awayTeam}</div>
            <div class="match-info">${match.matchday || ''}</div>
        `;
        
        return matchElement;
    }

    // Actualizar la lista de partidos en el DOM (intenta desde Marca, cae a fallback)
    async updateMatchesList() {
        if (!this.matchesContainer) {
            this.showErrorMessage();
            return;
        }

        try {
            let upcomingMatches = await this.fetchMatchesFromMarca();

            if (!upcomingMatches || upcomingMatches.length === 0) {
                // Fallback local si no se pudo obtener desde Marca
                const matches = this.getMatchesData();
                upcomingMatches = this.filterUpcomingMatches(matches);
            }
            
            // Limpiar contenedor
            this.matchesContainer.innerHTML = '';
            
            if (!upcomingMatches || upcomingMatches.length === 0) {
                // Si no hay partidos pr√≥ximos, mostrar mensaje
                const noMatchesElement = document.createElement('div');
                noMatchesElement.className = 'schedule-item no-matches';
                noMatchesElement.innerHTML = `
                    <div class="match-time">üìÖ</div>
                    <div class="match-teams">No hay partidos pr√≥ximos</div>
                    <div class="match-info">Pr√≥ximamente...</div>
                `;
                this.matchesContainer.appendChild(noMatchesElement);
            } else {
                 upcomingMatches.forEach(match => {
                     const matchElement = this.createMatchHTML(match);
                     this.matchesContainer.appendChild(matchElement);
                 });
             }
            
            console.log(`Actualizados ${upcomingMatches.length} pr√≥ximos partidos`);
            
        } catch (error) {
            console.error('Error al actualizar partidos:', error);
            this.showErrorMessage();
        }
    }

    // Mostrar mensaje de error
    showErrorMessage() {
        if (this.matchesContainer) {
            this.matchesContainer.innerHTML = `
                <div class="schedule-item error">
                    <div class="match-time">Error</div>
                    <div class="match-teams">No se pudieron cargar los partidos</div>
                    <div class="match-info">Int√©ntalo m√°s tarde</div>
                </div>
            `;
        }
    }

    // Inicializar actualizador autom√°tico
    startAutoUpdate() {
        // Actualizar inmediatamente
        this.updateMatchesList();
        
        // Actualizar cada hora
        setInterval(() => {
            this.updateMatchesList();
        }, 60 * 60 * 1000); // 1 hora
        
        // Actualizar a medianoche para cambiar la fecha "hoy"
        const now = new Date();
        const tomorrow = new Date(now);
        tomorrow.setDate(tomorrow.getDate() + 1);
        tomorrow.setHours(0, 0, 0, 0);
        
        const msUntilMidnight = tomorrow.getTime() - now.getTime();
        
        setTimeout(() => {
            this.today = new Date();
            this.today.setHours(0, 0, 0, 0);
            this.updateMatchesList();
            
            // Configurar actualizaci√≥n diaria
            setInterval(() => {
                this.today = new Date();
                this.today.setHours(0, 0, 0, 0);
                this.updateMatchesList();
            }, 24 * 60 * 60 * 1000); // 24 horas
            
        }, msUntilMidnight);
    }

    // M√©todo p√∫blico para actualizaci√≥n manual
    refresh() {
        this.today = new Date();
        this.today.setHours(0, 0, 0, 0);
        this.updateMatchesList();
    }
}

// Inicializar cuando el DOM est√© listo
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
        window.matchesUpdater = new MatchesUpdater();
        window.matchesUpdater.startAutoUpdate();
    });
} else {
    window.matchesUpdater = new MatchesUpdater();
    window.matchesUpdater.startAutoUpdate();
}

// Exportar para uso global
window.MatchesUpdater = MatchesUpdater;

// Funcionalidades interactivas de la p√°gina
document.addEventListener('DOMContentLoaded', function() {
    // Elementos del DOM
    const loadingOverlay = document.getElementById('loadingOverlay');
    const videoPlayer = document.getElementById('videoPlayer');
    const playerContainer = document.getElementById('playerContainer');


    // Simular carga del reproductor
    setTimeout(() => {
        if (loadingOverlay) {
            loadingOverlay.style.opacity = '0';
            setTimeout(() => {
                loadingOverlay.style.display = 'none';
            }, 300);
        }
    }, 2000);

    // Contador regresivo para el mensaje de carga
     let countdown = 30;
     const loadingCountdown = document.getElementById('loadingCountdown');
     
     const countdownInterval = setInterval(() => {
         countdown--;
         if (loadingCountdown) {
             loadingCountdown.textContent = `Espera ${countdown} segundos a que cargue el contenido`;
         }
         
         if (countdown <= 0) {
             clearInterval(countdownInterval);
             const loadingMessage = document.getElementById('loadingMessage');
             if (loadingMessage) {
                 loadingMessage.style.opacity = '0';
                 setTimeout(() => {
                     loadingMessage.style.display = 'none';
                 }, 500);
             }
         }
     }, 1000);

    // Efectos de hover para elementos interactivos
    document.querySelectorAll('.match-item').forEach(item => {
        item.addEventListener('mouseenter', function() {
            this.style.transform = 'translateX(4px)';
        });
        
        item.addEventListener('mouseleave', function() {
            this.style.transform = 'translateX(0)';
        });
    });

    // Optimizaci√≥n de rendimiento: Intersection Observer para animaciones
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);

    // Aplicar animaciones de entrada
    const animatedElements = document.querySelectorAll('.player-section, .schedule-section, .stats-section');
    animatedElements.forEach((el, index) => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(20px)';
        el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        el.style.transitionDelay = `${index * 0.1}s`;
        observer.observe(el);
    });

    // Manejo de errores del reproductor
    window.addEventListener('error', function(e) {
        if (e.target.tagName === 'IFRAME') {
            console.log('Error cargando el reproductor, reintentando...');
            // Aqu√≠ podr√≠as implementar l√≥gica de reintento
        }
    });

    // Detectar cuando el iframe del reproductor se carga
    const checkIframe = setInterval(() => {
        const iframe = document.querySelector('#videoPlayer iframe');
        if (iframe) {
            clearInterval(checkIframe);
            
            // Ocultar overlay de carga cuando el iframe est√© listo
            iframe.addEventListener('load', () => {
                setTimeout(() => {
                    if (loadingOverlay) {
                        loadingOverlay.style.opacity = '0';
                        setTimeout(() => {
                            loadingOverlay.style.display = 'none';
                        }, 300);
                    }
                }, 1000);
            });
        }
    }, 500);

    // Limpiar el intervalo despu√©s de 10 segundos para evitar bucles infinitos
    setTimeout(() => {
        clearInterval(checkIframe);
    }, 10000);

    console.log('DPT Sports Player inicializado correctamente');

    // Inicializar sistema de actualizaci√≥n de partidos
    if (typeof MatchesUpdater !== 'undefined') {
        const matchesUpdater = new MatchesUpdater();
        matchesUpdater.updateMatchesList();
        matchesUpdater.startAutoUpdate();
        
        // Agregar bot√≥n de actualizaci√≥n manual
        const scheduleSection = document.querySelector('.schedule-section');
        if (scheduleSection) {
            const refreshBtn = document.createElement('button');
            refreshBtn.textContent = 'üîÑ Actualizar';
            refreshBtn.className = 'refresh-matches-btn';
            refreshBtn.style.cssText = `
                background: var(--accent-color);
                color: white;
                border: none;
                padding: 0.5rem 1rem;
                border-radius: 8px;
                cursor: pointer;
                font-size: 0.8rem;
                margin-top: 1rem;
                transition: all 0.3s ease;
            `;
            refreshBtn.addEventListener('click', () => {
                 matchesUpdater.updateMatchesList();
                 refreshBtn.textContent = '‚è≥ Actualizando...';
                 setTimeout(() => {
                     refreshBtn.textContent = 'üîÑ Actualizar';
                 }, 2000);
             });
            scheduleSection.appendChild(refreshBtn);
        }
    }

    // Bloqueo de anuncios y navegaci√≥n externa - MODO AGRESIVO
    // Interceptar y bloquear completamente window.open
    window.open = function(url, name, specs) {
        console.log('üö´ BLOQUEADO: Intento de abrir ventana/popup:', url);
        return {
            focus: function() {},
            blur: function() {},
            close: function() {},
            closed: false,
            location: { href: '' },
            opener: null
        };
    };
    
    // Bloquear tambi√©n otras variantes
    window.showModalDialog = function() {
        console.log('üö´ BLOQUEADO: showModalDialog');
        return null;
    };
    
    // Interceptar document.open
    const originalDocumentOpen = document.open;
    document.open = function() {
        console.log('üö´ BLOQUEADO: document.open');
        return originalDocumentOpen.apply(this, arguments);
    };

    // Bloquear eventos de click que intenten navegar externamente - MODO AGRESIVO
     document.addEventListener('click', function(e) {
         const target = e.target;
         const href = target.href || target.closest('a')?.href;
         
         // Bloquear cualquier enlace externo excepto Telegram
         if (href && !href.includes(window.location.hostname) && !href.includes('t.me')) {
             e.preventDefault();
             e.stopPropagation();
             e.stopImmediatePropagation();
             console.log('üö´ BLOQUEADO: Enlace externo:', href);
             return false;
         }
         
         // Bloquear clicks en elementos que podr√≠an ser anuncios
         if (target.tagName === 'IFRAME' || target.closest('iframe')) {
             // Permitir clicks normales en iframe pero interceptar navegaci√≥n
             const iframe = target.tagName === 'IFRAME' ? target : target.closest('iframe');
             if (iframe && iframe.src && iframe.src.includes('new.allover.top')) {
                 // Este es nuestro iframe leg√≠timo, permitir interacci√≥n normal
                 return true;
             }
         }
     }, true);
     
     // Interceptar todos los eventos de mousedown tambi√©n
     document.addEventListener('mousedown', function(e) {
         if (e.target.tagName === 'A' || e.target.closest('a')) {
             const link = e.target.tagName === 'A' ? e.target : e.target.closest('a');
             const href = link.href;
             if (href && !href.includes(window.location.hostname) && !href.includes('t.me')) {
                 e.preventDefault();
                 e.stopPropagation();
                 e.stopImmediatePropagation();
                 console.log('üö´ BLOQUEADO: Mousedown en enlace externo:', href);
                 return false;
             }
         }
     }, true);

    // Bloquear redirecciones autom√°ticas
    const originalAssign = window.location.assign;
    const originalReplace = window.location.replace;
    
    window.location.assign = function(url) {
        if (!url.includes(window.location.hostname) && !url.includes('t.me')) {
            console.log('Bloqueada redirecci√≥n assign:', url);
            return;
        }
        originalAssign.call(window.location, url);
    };
    
    window.location.replace = function(url) {
        if (!url.includes(window.location.hostname) && !url.includes('t.me')) {
            console.log('Bloqueada redirecci√≥n replace:', url);
            return;
        }
        originalReplace.call(window.location, url);
    };

    // Interceptar intentos de cambio de ubicaci√≥n
    const originalSetHref = Object.getOwnPropertyDescriptor(window.location, 'href')?.set;
    if (originalSetHref) {
        try {
            Object.defineProperty(window.location, 'href', {
                set: function(url) {
                    if (!url.includes(window.location.hostname) && !url.includes('t.me')) {
                        console.log('Bloqueado cambio de href:', url);
                        return;
                    }
                    originalSetHref.call(window.location, url);
                },
                configurable: true
            });
        } catch (e) {
            console.log('No se pudo interceptar href, usando m√©todo alternativo');
        }
    }

    // Bloquear eventos beforeunload maliciosos
    window.addEventListener('beforeunload', function(e) {
        // Permitir navegaci√≥n normal del usuario
        return;
    });

    // Interceptar creaci√≥n din√°mica de elementos que puedan ser anuncios
     const originalCreateElement = document.createElement;
     document.createElement = function(tagName) {
         const element = originalCreateElement.call(document, tagName);
         
         if (tagName.toLowerCase() === 'a') {
             // Interceptar enlaces creados din√°micamente
             const originalSetAttribute = element.setAttribute;
             element.setAttribute = function(name, value) {
                 if (name === 'href' && value && !value.includes(window.location.hostname) && !value.includes('t.me')) {
                     console.log('üö´ BLOQUEADO: Enlace din√°mico externo:', value);
                     return;
                 }
                 return originalSetAttribute.call(this, name, value);
             };
         }
         
         if (tagName.toLowerCase() === 'iframe') {
             // Interceptar iframes creados din√°micamente
             const originalSetAttribute = element.setAttribute;
             element.setAttribute = function(name, value) {
                 if (name === 'src' && value && !value.includes('new.allover.top') && !value.includes(window.location.hostname)) {
                     console.log('üö´ BLOQUEADO: Iframe din√°mico externo:', value);
                     return;
                 }
                 return originalSetAttribute.call(this, name, value);
             };
         }
         
         return element;
     };
     
     // Bloquear setTimeout y setInterval maliciosos que puedan abrir popups
     const originalSetTimeout = window.setTimeout;
     const originalSetInterval = window.setInterval;
     
     window.setTimeout = function(callback, delay) {
         if (typeof callback === 'string' && (callback.includes('window.open') || callback.includes('location.href'))) {
             console.log('üö´ BLOQUEADO: setTimeout malicioso:', callback);
             return null;
         }
         return originalSetTimeout.apply(window, arguments);
     };
     
     window.setInterval = function(callback, delay) {
         if (typeof callback === 'string' && (callback.includes('window.open') || callback.includes('location.href'))) {
             console.log('üö´ BLOQUEADO: setInterval malicioso:', callback);
             return null;
         }
         return originalSetInterval.apply(window, arguments);
     };
     
     console.log('üõ°Ô∏è Sistema de bloqueo de anuncios AGRESIVO activado');
     console.log('üîí Protecciones activas: popups, redirecciones, enlaces externos, elementos din√°micos');
});
    </script>
    
    <!-- Mensaje de descargo de responsabilidad -->
    <footer class="disclaimer">
        <div class="disclaimer-content">
            <p><strong>Aviso Legal:</strong> Esta p√°gina web no emite ning√∫n contenido ilegal. Simplemente integra un iframe de otra web externa. Todo el contenido mostrado proviene de fuentes de terceros y no es responsabilidad de este sitio web.</p>
        </div>
    </footer>
</body>
</html>
